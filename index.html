<!DOCTYPE html>
<title>simplebug</title>
<h2>Description</h2>
<p id="description"><pre>
Hi, 

When uploading a photo in facebook status
*Choose Photo from Gallery 
*In status only photo (editing mode)

After upload, the same photo uploaded twice.
</pre></p>
<h2>Suggested Fix</h2>
<p id="suggested-fix"><pre>
this was considered desirable behaviour back in 2004: bug 197294.. I guess it still is (though I CC Boris in case he wants to comment). The recommended fix is to simply set .value='' on the cloned input before adding it to the DOM. Code:

    i.prototype.cloneDOMNode = function() {
        "use strict";
        var j = this.$MPhotoUploadFileInput0;
        this.$MPhotoUploadFileInput0 = j.cloneNode(true);
        g.replace(j, this.$MPhotoUploadFileInput0);

as seen in https://fbstatic-a.akamaihd.net/rsrc.php/v2/yW/r/fyE3nmvODl4.js
</pre></p>
<h2>More information</h2>
<p id="bug-link">Comment on the bug here <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=953388">953388</a>.</p>